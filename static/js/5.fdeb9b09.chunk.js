(this.webpackJsonpworkbooks=this.webpackJsonpworkbooks||[]).push([[5],{136:function(e,t,a){e.exports={workbooks:"workbook_workbooks__1vgfz",workbooks__box:"workbook_workbooks__box__mWZA6",workbook:"workbook_workbook__2j0Bx"}},213:function(e,t,a){e.exports={workbookNavbar__menu:"navbar_workbookNavbar__menu__33cgb"}},214:function(e,t,a){e.exports={accordion:"accordion_accordion__qXOET",accordion__fullWidth:"accordion_accordion__fullWidth__1ixm7",accordion__details:"accordion_accordion__details__1e6Th",accordion__content:"accordion_accordion__content__2t5mA",accordion__deleteIcon:"accordion_accordion__deleteIcon__3cySz"}},219:function(e,t,a){e.exports={requestResult:"requestResult_requestResult__3nD0H",requestResult_success:"requestResult_requestResult_success__hDoxU",requestResult_failed:"requestResult_requestResult_failed__3un0P"}},223:function(e,t,a){e.exports={table:"table_table__22P7A"}},263:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return pe}));var n=a(4),r=a(50),c=a(0),o=a(24),s=a(3),i=a(62),l=a(56),u=a(10),b=a(77),d=a(64),j=function(e){return e.workbook},p=Object(d.a)([j],(function(e){return e.workbookStatus})),O=Object(d.a)([j],(function(e){return e.deleteStatus})),f=Object(d.a)([j],(function(e){return e.workbooks})),_=(Object(d.a)([j],(function(e){return e.workbookError})),a(253)),k=a(258),h=a(259),w=a(55),x=a(213),v=a.n(x);var g=function(e){var t=e.userType,a=Object(o.b)();return Object(n.jsx)(_.a,{position:"static",className:v.a.workbookNavbar,children:Object(n.jsxs)(k.a,{children:[Object(n.jsxs)(h.a,{variant:"h6",className:v.a.workbookNavbar__menu,"data-testid":"navbar",children:["Hello ",t]}),Object(n.jsx)(w.a,{text:"Logout",handleClick:function(){a(Object(i.b)())},isTransparent:!0})]})})},m=a(25),D=a(51),y=a.n(D),N=a(266),C=a(265),S=a(260),A=a(215),I=a.n(A),M=a(217),T=a.n(M),W=a(264),E=a(262),z=a(261),R=a(214),q=a.n(R);var F=function(e){var t=e.rowName,a=e.fullWidth,o=e.children,s=e.isExpanded,i=e.changeHandler,l=e.canDelete,u=e.handleDelete,b=Object(c.useState)(!1),d=Object(r.a)(b,2),j=d[0],p=d[1],O=Object(c.useCallback)((function(e){e.stopPropagation(),p(!0)}),[]),f=Object(c.useCallback)((function(){p(!1)}),[]),_=Object(c.useCallback)((function(){p(!1),u()}),[u]),k=y()(q.a.accordion,Object(m.a)({},q.a.accordion__fullWidth,a));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(N.a,{className:k,expanded:s,onChange:i,children:[Object(n.jsxs)(C.a,{expandIcon:Object(n.jsx)(I.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",className:q.a.accordion__content,children:[Object(n.jsx)(h.a,{children:t}),l&&Object(n.jsx)(T.a,{className:q.a.accordion__deleteIcon,onClick:O})]}),Object(n.jsx)(S.a,{className:q.a.accordion__details,children:o})]}),Object(n.jsxs)(W.a,{open:j,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(z.a,{id:"alert-dialog-title",children:"Are you sure you want to delete?"}),Object(n.jsxs)(E.a,{children:[Object(n.jsx)(w.a,{text:"Cancel",handleClick:f,defaultColored:!0}),Object(n.jsx)(w.a,{text:"Delete",handleClick:_,redColored:!0})]})]})]})};var P=function(e){var t=e.workbooks,a=e.user,o=Object(c.useState)(!1),s=Object(r.a)(o,2),i=s[0],l=s[1],u=Object(c.useCallback)((function(){l(!1)}),[]),b=Object(c.useCallback)((function(){l((function(e){return!e}))}),[]);return Object(n.jsx)("div",{children:Object(n.jsx)(F,{isExpanded:i,changeHandler:b,rowName:"+ Add new workbook","data-testid":"add-new-workbook",children:Object(n.jsx)(K,{closeAccordion:u,workbooks:t,user:a})})})},B=(a(218),a(220)),H=a.n(B),Z=a(221),U=a.n(Z),J=a(26),X=a(219),L=a.n(X);var Y=function(e){var t=e.status,a=e.text;return Object(n.jsx)("div",{className:L.a.requestResult,children:"pending"===t?Object(n.jsx)(J.a,{"data-testid":"loader"}):"successful"===t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(H.a,{className:L.a.requestResult_success}),Object(n.jsx)("p",{children:a})]}):"failed"===t?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(U.a,{className:L.a.requestResult_failed}),Object(n.jsx)("p",{children:a})]}):void 0})};var K=function(e){var t,a=e.closeAccordion,s=e.workbooks,i=e.user,b=Object(c.useState)(""),d=Object(r.a)(b,2),j=d[0],O=d[1],f=Object(c.useState)(""),_=Object(r.a)(f,2),k=_[0],h=_[1],x=Object(c.useState)(""),v=Object(r.a)(x,2),g=v[0],m=v[1],D=Object(c.useState)(""),y=Object(r.a)(D,2),N=y[0],C=y[1],S=Object(c.useState)(new Date),A=Object(r.a)(S,2),I=A[0],M=A[1],T=Object(c.useState)(""),W=Object(r.a)(T,2),E=W[0],z=W[1],R=Object(c.useState)(!1),q=Object(r.a)(R,2),F=q[0],P=q[1],B=Object(c.useState)(!1),H=Object(r.a)(B,2),Z=H[0],U=H[1],J=Object(o.b)(),X=Object(o.c)(p),L=Object(c.useCallback)((function(e){var t=e.target.value;O(t.replace(/[^A-Za-z]/gi,""))}),[]),K=Object(c.useCallback)((function(e){var t=e.target.value;h(t.replace(/[^A-Za-z]/gi,""))}),[]),Q=Object(c.useCallback)((function(e){m(e.target.value)}),[]),V=Object(c.useCallback)((function(e){M(e)}),[]),$=Object(c.useCallback)((function(e){C(e.target.value)}),[]),G=""===j||""===k||""===g||""===N;return"successful"===X?t="New workbook has been successfully created":"failed"===X&&(t="Something went wrong! Please try again later"),X?Object(n.jsx)(Y,{status:X,text:t}):Object(n.jsxs)("form",{className:"forms",onSubmit:function(e){if(e.preventDefault(),function(){z("");var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return N.match(e)}())if(function(){P(!1);var e=new Date(Date.now()-+new Date(I));return Math.floor(+e/31536e6)>=18}()){if(function(){var e=!0;return z(""),U(!1),s&&Object.values(s).map((function(t){return N===t.email&&(e=!1,z(" This email has already been used")),g===t.passport&&(e=!1,U(!0)),null})),e}()){J({type:u.g});var t,n={firstName:j,lastName:k,passport:g,email:N.toLowerCase(),birthDate:I.toString()};"user"===i.type&&(n.user_ID=i.id),J((t=n,function(e){l.a.database().ref("/Workbooks/").push(t).then((function(){e({type:u.h})})).catch((function(){e({type:u.f})}))})),setTimeout((function(){a(),J({type:u.e}),O(""),h(""),m(""),C(""),M(new Date)}),5e3)}}else P(!0);else z("Invalid email type")},"data-testid":"workbook-form",children:[Object(n.jsx)(w.c,{label:"First Name",id:"firstName",value:j,handleChange:L,pattern:"[a-zA-Z]+"}),Object(n.jsx)(w.c,{label:"Last Name",id:"lastName",value:k,handleChange:K,pattern:"[a-zA-Z]+"}),Object(n.jsx)(w.c,{label:"Passport",id:"passport",value:g,handleChange:Q,hasError:Z,errorMessage:"This passport has already been used"}),Object(n.jsx)(w.c,{type:"email",label:"Email",id:"email",value:N,handleChange:$,hasError:Boolean(E),errorMessage:E}),Object(n.jsx)(w.b,{selectedDate:I,handleChange:V,id:"birthDate",label:"Birth date",hasError:F,errorMessage:"Only 18 over is allowed!"}),Object(n.jsx)(w.a,{type:"submit",disabled:G,text:"Add",rightAlign:!0})]})},Q=a(1),V=a(140),$=a(222),G=a(12),ee=function(e){return e.workplace},te=Object(d.a)(ee,(function(e){return e.workplaceStatus})),ae=(Object(d.a)(ee,(function(e){return e.workplaces})),Object(d.a)(ee,(function(e){return e.workplaceError})),a(93)),ne=a.n(ae);var re=function(e){var t,a=e.id,s=e.closeAccordion,i=e.workplaces,u=Object(c.useState)(""),b=Object(r.a)(u,2),d=b[0],j=b[1],p=Object(c.useState)(new Date),O=Object(r.a)(p,2),f=O[0],_=O[1],k=Object(c.useState)(),h=Object(r.a)(k,2),x=h[0],v=h[1],g=Object(c.useState)(!1),m=Object(r.a)(g,2),D=m[0],y=m[1],N=Object(c.useState)(""),C=Object(r.a)(N,2),S=C[0],A=C[1],I=Object(c.useState)(!1),M=Object(r.a)(I,2),T=M[0],W=M[1],E=Object(c.useState)(""),z=Object(r.a)(E,2),R=z[0],q=z[1],F=Object(o.b)(),P=Object(o.c)(te),B=Object(c.useCallback)((function(e){j(e.target.value)}),[]),H=Object(c.useCallback)((function(e){_(e)}),[]),Z=Object(c.useCallback)((function(e){v(e)}),[]),U=Object(c.useCallback)((function(e){A(e)}),[]),J=Object(c.useCallback)((function(e){var t=(null===e||void 0===e?void 0:e.target).checked;y(t),W(t),t&&v()}),[]);"successful"===P?t="New workbook has been successfully created":"failed"===P&&(t="Something went wrong! Please try again later");var X=""===d||""===S||!f;return P?Object(n.jsx)(Y,{status:P,text:t}):Object(n.jsxs)("form",{className:"forms",onSubmit:function(e){if(e.preventDefault(),q(""),new Date(f)>=new Date(x))q("Start date is greater than end date");else{if(i&&Object.values(i).some((function(e){var t="Till now"===e.endDate&&!x||"Till now"===e.endDate&&new Date(e.startDate)<=new Date(x),a=new Date(e.startDate)<=new Date(f)&&new Date(f)<=new Date(e.endDate)||new Date(e.startDate)<=new Date(x)&&new Date(x)<=new Date(e.endDate)||new Date(f)<=new Date(e.startDate)&&new Date(e.startDate)<=new Date(x)||new Date(f)<=new Date(e.endDate)&&new Date(e.endDate)<=new Date(x);return t||a})))return void q("You should have only one workplace during the same period");F({type:G.g});var t={startDate:f.toString(),endDate:x?x.toString():"Till now",country:S,company:d};F(function(e,t){return function(a){l.a.database().ref("/Workbooks/".concat(t,"/Workplaces")).push(e).then((function(){a({type:G.h})})).catch((function(){a({type:G.f})}))}}(t,a)),setTimeout((function(){s(),F({type:G.e}),j(""),A(""),_(new Date),v()}),5e3)}},children:[Object(n.jsx)(w.c,{id:"company",label:"Company",value:d,handleChange:B}),Object(n.jsx)(w.b,{id:"startDate",label:"Start date",selectedDate:f,handleChange:H}),Object(n.jsx)(w.b,{id:"endDate",label:"End date",selectedDate:x,handleChange:Z,hasError:Boolean(R),errorMessage:R,zeroMargin:!0,isDisabled:T}),Object(n.jsx)(w.c,{type:"checkbox",value:"",checked:D,handleChange:J,label:"Working till now",rowFlex:!0}),Object(n.jsx)("div",{children:Object(n.jsx)($.a,{searchable:!0,searchPlaceholder:"Search for a country",selected:S,onSelect:U,className:ne.a.workplaces__flagSelect})}),Object(n.jsx)(w.a,{text:"Add",type:"submit",disabled:X,rightAlign:!0})]})};var ce=function(e){var t=e.id,a=e.workplaces,o=Object(c.useState)(!1),s=Object(r.a)(o,2),i=s[0],l=s[1],u=Object(c.useCallback)((function(){l(!1)}),[]),b=Object(c.useCallback)((function(){l((function(e){return!e}))}),[]);return Object(n.jsx)(F,{isExpanded:i,changeHandler:b,rowName:"+ Add new workplace",children:Object(n.jsx)(re,{id:t,closeAccordion:u,workplaces:a})})},oe=a(223),se=a.n(oe);var ie=function(e){var t=e.tableData,a=void 0===t?{}:t;return Object(n.jsx)("ul",{className:se.a.table,"data-testid":"table",children:Object.entries(a).map((function(e){var t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{children:[a,":"]}),Object(n.jsx)("span",{children:c})]},a)}))})};var le=function(e){var t=e.workplaceID,a=e.workbookID,r=e.workplace,s=void 0===r?{}:r,i=e.canDelete,u=(s.company,Object(V.a)(s,["company"])),b=Object(o.b)(),d=Object(Q.a)(Object(Q.a)({},u),{},{startDate:new Date(u.startDate).toDateString().slice(4)});"Till now"!==u.endDate&&(d.endDate=new Date(u.endDate).toDateString().slice(4));var j=Object(c.useCallback)((function(){b(function(e,t){return function(a){l.a.database().ref("/Workbooks/".concat(t,"/Workplaces/").concat(e)).remove().then((function(){return a({type:G.b})})).catch((function(){a({type:G.a})}))}}(t,a)),setTimeout((function(){b({type:G.d})}),5e3)}),[b,t,a]);return Object(n.jsx)("div",{className:ne.a.workplace,"data-testid":"workplace",children:Object(n.jsx)(F,{rowName:s.company,fullWidth:!0,canDelete:i,handleDelete:j,children:Object(n.jsx)(ie,{tableData:d})})})};var ue=function(e){var t=e.workbookID,a=e.workplaces,c=e.user,o=e.workbookUserID,s=!0;"user"===c.type&&(s=c.id===o);var i=y()(Object(m.a)({},ne.a.workplaces,Boolean(a)));return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:i,"data-testid":"workplaces",children:[s&&Object(n.jsx)(ce,{id:t,workplaces:a}),a&&Object.entries(a).map((function(e){var a=Object(r.a)(e,2),o=a[0],i=a[1];return Object(n.jsx)(le,{userID:c.id,workbookID:t,workplaceID:o,workplace:i,canDelete:s},o)}))]})})},be=a(136),de=a.n(be);var je=function(e){var t=e.workbook,a=e.workbookID,r=e.user,s=t.firstName,i=t.lastName,b=t.user_ID,d=t.Workplaces,j=Object(V.a)(t,["firstName","lastName","user_ID","Workplaces"]),p=Object(o.b)(),O=Object(Q.a)(Object(Q.a)({},j),{},{birthDate:new Date(j.birthDate).toDateString().slice(4)}),f=!0;"user"===r.type&&(f=b===r.id);var _=Object(c.useCallback)((function(){var e;p((e=a,function(t){l.a.database().ref("/Workbooks/".concat(e)).remove().then((function(){return t({type:u.b})})).catch((function(){t({type:u.a})}))})),setTimeout((function(){p({type:u.d})}),5e3)}),[p,a]);return Object(n.jsx)("div",{className:de.a.workbook,"data-testid":"workbook",children:Object(n.jsxs)(F,{rowName:"".concat(s," ").concat(i),fullWidth:!0,canDelete:f,handleDelete:_,children:[Object(n.jsx)(ie,{tableData:O}),Object(n.jsx)(ue,{workbookID:a,workplaces:d,workbookUserID:b,user:r})]})})};var pe=function(){var e,t=Object(s.f)(),a=Object(o.b)(),d=Object(o.c)(b.b),j=Object(o.c)(f),p=Object(o.c)(O);return Object(c.useEffect)((function(){a(Object(i.a)()),a((function(e){l.a.database().ref("/Workbooks").on("value",(function(t){t.exists()&&e({type:u.c,payload:{workbooks:t.val()}})}))}))}),[a]),"successful"===p?e="Workbook has been deleted":"failed"===p&&(e="Something went wrong. Please try again later"),d?"pending"===(null===d||void 0===d?void 0:d.status)?Object(n.jsx)("div",{className:"page-center-loader",children:Object(n.jsx)(J.a,{})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g,{userType:null===d||void 0===d?void 0:d.type}),Object(n.jsxs)("div",{className:de.a.workbooks,"data-testid":"workbooks",children:[Object(n.jsx)(P,{workbooks:j,user:d}),Object(n.jsxs)("div",{className:de.a.workbooks__box,children:[p&&Object(n.jsx)(Y,{status:p,text:e}),j&&Object.entries(j).map((function(e){var t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.jsx)(je,{workbookID:a,workbook:c,user:d},a)}))]})]})]}):(t.push("/login"),null)}},49:function(e,t,a){e.exports={inputs:"inputs_inputs__1mJmc",inputs__errorText:"inputs_inputs__errorText__v59sp",inputs_errors:"inputs_inputs_errors__1uUgN",inputs__labels:"inputs_inputs__labels__2Nx3A",inputs__field:"inputs_inputs__field__2hSl7",inputs_directionRow:"inputs_inputs_directionRow__3aXFg",inputs_zeroMargin:"inputs_inputs_zeroMargin__3TNQi",buttons:"inputs_buttons__2ba7F",buttons_rightAlign:"inputs_buttons_rightAlign__3HpM5",buttons_centerAlign:"inputs_buttons_centerAlign__3XsH2",buttons_red:"inputs_buttons_red__12KSJ",buttons_default:"inputs_buttons_default__3i1w1"}},55:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return p}));var n=a(4),r=a(25),c=a(51),o=a.n(c),s=a(49),i=a.n(s);var l=function(e){var t,a=e.children,c=e.label,s=e.id,l=e.hasError,u=e.errorMessage,b=e.rowFlex,d=e.zeroMargin,j=o()(i.a.inputs,(t={},Object(r.a)(t,i.a.inputs_errors,l),Object(r.a)(t,i.a.inputs_directionRow,b),Object(r.a)(t,i.a.inputs_zeroMargin,d),t));return Object(n.jsxs)("div",{className:j,"data-testid":"wrapper-box",children:[l&&Object(n.jsx)("span",{className:i.a.inputs__errorText,"data-testid":"error-testing",children:u}),a,Object(n.jsx)("label",{htmlFor:s,className:i.a.inputs__labels,"data-testid":"label",children:c})]})};var u=function(e){var t=e.type,a=void 0===t?"text":t,r=e.label,c=e.value,o=e.handleChange,s=e.id,u=e.hasError,b=e.errorMessage,d=e.autoComplete,j=e.pattern,p=void 0===j?null:j,O=e.checked,f=e.rowFlex;return Object(n.jsx)(l,{id:s,label:r,hasError:u,errorMessage:b,rowFlex:f,children:Object(n.jsx)("input",{type:a,id:s,value:c,onChange:o,className:i.a.inputs__field,autoComplete:d,pattern:p,"data-testid":"input",checked:O})})};var b=function(e){var t,a,c=e.type,s=void 0===c?"button":c,l=e.text,u=e.handleClick,b=void 0===u?function(){return null}:u,d=e.disabled,j=e.isTransparent,p=e.rightAlign,O=e.centerAlign,f=e.redColored,_=e.defaultColored,k=o()(i.a.buttons,(t={},Object(r.a)(t,i.a.buttons_transparent,j),Object(r.a)(t,i.a.buttons_red,f),Object(r.a)(t,i.a.buttons_default,_),t)),h=o()((a={},Object(r.a)(a,i.a.buttons_rightAlign,p),Object(r.a)(a,i.a.buttons_centerAlign,O),a));return Object(n.jsx)("div",{className:h,children:Object(n.jsx)("button",{type:s,onClick:b,className:k,disabled:d,"data-testid":"button",children:l})})},d=a(103),j=a.n(d);var p=function(e){var t=e.selectedDate,a=e.handleChange,r=e.id,c=e.label,o=e.hasError,s=e.errorMessage,u=e.zeroMargin,b=e.isDisabled;return Object(n.jsx)(l,{id:r,label:c,hasError:o,errorMessage:s,zeroMargin:u,children:Object(n.jsx)(j.a,{selected:t,onChange:a,id:r,showYearDropdown:!0,scrollableYearDropdown:!0,dateFormatCalendar:"MMMM",yearDropdownItemNumber:15,className:i.a.inputs__field,disabled:b})})}},56:function(e,t,a){"use strict";var n=a(98);a(101),a(102);n.a.initializeApp({apiKey:"AIzaSyDX7sVrgmBvmTAt8dwvrpTw8Sy9Og77eqw",authDomain:"webb-fontaine-b719a.firebaseapp.com",projectId:"webb-fontaine-b719a",storageBucket:"webb-fontaine-b719a.appspot.com",messagingSenderId:"236763911162",appId:"1:236763911162:web:74b125e3f74026b9310a43"}),t.a=n.a},62:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a(56),r=a(14),c=function(e){var t=e.email,a=e.password;return function(e){n.a.auth().signInWithEmailAndPassword(t,a).then((function(t){null!==t&&null!==t.user&&(e(i(t.user.uid)),e({type:r.c}))})).catch((function(t){e({type:r.b,payload:{error:t}})}))}},o=function(){return function(e){n.a.auth().signOut().then((function(){e({type:r.d})}))}},s=function(){return function(e){n.a.auth().onAuthStateChanged((function(t){e(t?i(t.uid):{type:r.b,payload:{error:null}})}))}},i=function(e){return function(t){n.a.database().ref("/Users/".concat(e)).once("value").then((function(e){return t({type:r.a,payload:{userData:e.val()}})}))}}},77:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a(64),r=function(e){return e.auth},c=Object(n.a)([r],(function(e){return e.userData})),o=Object(n.a)([r],(function(e){return e.authError}))},93:function(e,t,a){e.exports={workplaces:"workplaces_workplaces__3-IDj",workplaces__newWorkplaces:"workplaces_workplaces__newWorkplaces__9twzN",workplaces__flagSelect:"workplaces_workplaces__flagSelect__1SM2u"}}}]);
//# sourceMappingURL=5.fdeb9b09.chunk.js.map